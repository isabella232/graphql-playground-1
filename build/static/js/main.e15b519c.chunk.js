(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,a){e.exports=a.p+"static/media/rubrikLogo.b5f40d5b.svg"},147:function(e,t){e.exports=require("https")},168:function(e,t,a){},220:function(e,t,a){e.exports=a(362)},225:function(e,t,a){},311:function(e,t){e.exports=require("punycode")},319:function(e,t,a){var n={"./Range.js":79,"./file.js":99,"./getASTNodeAtPosition.js":98,"./index.js":35,"./validateWithCustomRules.js":115};function r(e){var t=o(e);return a(t)}function o(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=319},320:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=320},321:function(e,t,a){var n={"./Range.js":[79],"./file.js":[99],"./getASTNodeAtPosition.js":[98],"./index.js":[35],"./validateWithCustomRules.js":[115]};function r(e){var t=n[e];return t?Promise.all(t.slice(1).map(a.e)).then(function(){var e=t[0];return a(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(n)},r.id=321,e.exports=r},322:function(e,t){function a(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=322},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),s=a.n(o),i=(a(225),a(57)),l=a(42),c=a(93),u=a(88),p=a(94),m=a(26),d=a(139),h=a(24),f=a.n(h),g=a(50),b=(a(168),a(140)),v=a.n(b),w=a(400),k=a(393),E=a(398),y=a(397),j=Object(k.a)(function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"100%"}}}}),O=Object(k.a)(function(e){return{root:{"& > *":{backgroundColor:"#FFF","&:hover":{backgroundColor:"#FFF"},width:"100%",textTransform:"none","font-weight":100,"font-size":" 1.0775rem"}}}}),x=Object(k.a)(function(e){return{root:{"& > *":{margin:e.spacing(1),width:"100%","&:hover":{"background-color":"#18b8e9","border-color":"#18b8e9"},"border-radius":"0.286rem","line-height":" 1.83",color:"#fff","background-color":"rgb(0, 134, 192)","border-color":"rgb(0, 134, 192)",display:"inline-block","margin-top":"20px","font-weight":200,"font-size":"1.0775rem","text-transform":"uppercase","box-shadow":"0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"}}}});function L(e){var t=j(),a=O(),n=x();return r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off"},r.a.createElement("div",null,r.a.createElement(w.a,{autoFocus:!0,error:null!==e.ip&&""===e.ip,required:!0,id:"ip",label:"cdm"===e.platform?"CDM IP or FQDN":"Polaris Domain",onChange:e.onChange,InputProps:"cdm"===e.platform?null:{endAdornment:r.a.createElement(y.a,{position:"end"},e.polarisDomain)}}),r.a.createElement(w.a,{required:!0,id:"username",label:"Username",onChange:e.onChange,error:null!==e.username&&""===e.username}),r.a.createElement(w.a,{required:!0,id:"password",label:"Password",type:"password",onChange:e.onChange,error:null!==e.password&&""===e.password})),r.a.createElement("div",{className:n.root},r.a.createElement(E.a,{color:"primary",variant:"contained",onClick:e.loginButton,disabled:null===e.ip||null===e.username||null===e.password||null!==e.ip&&e.ip.length<=0||null!==e.username&&e.username.length<=0||null!==e.password&&e.password.length<=0||"Login"!==e.loginButtonText||void 0},e.loginButtonText)),r.a.createElement("div",{className:a.root},r.a.createElement(E.a,{onClick:e.selectYourPlatform},"cdm"===e.platform?"Switch to Polaris":"Switch to CDM")))}var C=a(207),N=a.n(C),D=a(147),T=a.n(D),S={"Content-Type":"application/json","User-Agent":"RubrikGraphQLPlayground"};function P(e){return e.replace("https://","").replace(".my.rubrik.com","").replace("/","")}function B(e){try{console.log(e.response)}catch(e){console.log("No additional error detail")}return e.response?401===e.response.status||422===e.response.status?"Sorry, you entered an incorrect email or password.":400===e.response.status||401===e.response.status?"Sorry, the request was rejected as malformed by the Rubrik platform.":"Sorry, the request was rejected with a ".concat(e.response.status," (").concat(e.response.data.message,") HTTP response status code."):e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("Network Error")?"Sorry, we were unable to connect to the provided Rubrik platform.":e.message.includes("connect ETIMEDOUT")||e.message.includes("timeout of 15000ms exceeded")?"Sorry, the connection to the Rubrik platform timeout and we were unable to connect.":e.message}function F(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(g.a)(f.a.mark(function e(t,a,n){var r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("rubrikApiPost"),console.log(a),console.log(n),r=N.a.create({timeout:15e3,httpsAgent:new T.a.Agent({rejectUnauthorized:!1})}),e.next=6,r({method:"post",url:t,headers:a,data:n});case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(e,t,a,n,r){return R.apply(this,arguments)}function R(){return(R=Object(g.a)(f.a.mark(function e(t,a,n,r,o){var s,i,l,c,u,p;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=S,"cdm"===t?(s.Authorization="Basic "+btoa(n+":"+r),i="/api/v1/session",l={}):(s.Accept="application/json, text/plain",s["Content-Type"]="application/json;charset=UTF-8",i="".concat(o,"/api/session"),l={username:n,password:r}),console.log(s),c=P(a),console.log(c),console.log(i),u="https://".concat(c).concat(i),console.log(u),e.next=10,F(u,s,l);case 10:if(p=e.sent,"cdm"!==t){e.next=15;break}return e.abrupt("return",p.data.token);case 15:return e.abrupt("return",p.data.access_token);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}var A=a(209),I=a.n(A),q=a(208),_=a.n(q),z=a(399),H=a(401),W=a(13),Y=a(363),J="Select your Platform",G="Login",Q=".my.rubrik.com",V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={formHeader:J,platform:null,loginButtonText:G,loginErrorMessage:null,apiToken:null,ip:null,username:null,password:null,polarisDomain:Q},a.createLoginForm=a.createLoginForm.bind(Object(m.a)(Object(m.a)(a))),a.handleSwitchToLogin=a.handleSwitchToLogin.bind(Object(m.a)(Object(m.a)(a))),a.handleSelectYourPlatform=a.handleSelectYourPlatform.bind(Object(m.a)(Object(m.a)(a))),a.onChange=a.onChange.bind(Object(m.a)(Object(m.a)(a))),a.handleLoginButton=a.handleLoginButton.bind(Object(m.a)(Object(m.a)(a))),a.createLoginHeader=a.createLoginHeader.bind(Object(m.a)(Object(m.a)(a))),a.createDevModeIcon=a.createDevModeIcon.bind(Object(m.a)(Object(m.a)(a))),a.handleModeButton=a.handleModeButton.bind(Object(m.a)(Object(m.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleSwitchToLogin",value:function(e){e.preventDefault(),this.setState({platform:e.target.textContent.toLowerCase(),formHeader:G})}},{key:"handleLoginButton",value:function(){var e=Object(g.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loginButtonText:"Attempting to Connect",loginErrorMessage:null}),e.prev=1,e.next=4,U(this.state.platform,this.state.ip,this.state.username,this.state.password,this.state.polarisDomain);case 4:a=e.sent,this.setState({apiToken:a,loginButtonText:"Login"}),this.props.credentialUpdate(this.state.platform,this.state.ip,this.state.username,this.state.password,this.state.apiToken,this.state.polarisDomain),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.setState({loginErrorMessage:B(e.t0),loginButtonText:G});case 12:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSelectYourPlatform",value:function(e,t){this.setState({platform:"polaris"===this.state.platform?"cdm":"polaris",loginErrorMessage:null})}},{key:"handleModeButton",value:function(){this.setState({polarisDomain:this.state.polarisDomain===Q?".dev.my.rubrik-lab.com":Q})}},{key:"onChange",value:function(e){this.setState(Object(d.a)({},e.target.id,e.target.value))}},{key:"createFullLandingPageUi",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"landing-page"},this.createWelcome(),this.createLogin()))}},{key:"createWelcome",value:function(){return r.a.createElement("div",{className:"welcome-message"},r.a.createElement("div",null),r.a.createElement("div",{className:"center-white-text"},r.a.createElement("div",{className:"larger-font-size"},r.a.createElement("span",null,"Welcome to the "),r.a.createElement("span",{className:"bold-text"},r.a.createElement("span",null,"Rubrik GraphQL Playground")))),r.a.createElement("div",{className:"bottom-white-small-text"},r.a.createElement("span",{className:"thin-text"},r.a.createElement("span",null,"Don't Backup. ")),r.a.createElement("span",null,"Go Forward.")))}},{key:"createLogin",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{className:"flex-row"},this.createLoginLogo(),this.createLoginHeader(),null===this.state.platform&&this.createLoginPlatformButtons(),null!=this.state.platform&&this.createLoginForm(),this.createRwpLink(),this.createDevModeIcon())))}},{key:"createLoginLogo",value:function(){return r.a.createElement("div",{className:"display-flex-justify"},r.a.createElement("img",{alt:"Rubrik logo",src:v.a,width:"80"}))}},{key:"createLoginHeader",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"login-text display-flex-justify"},this.state.formHeader),null!=this.state.platform&&this.createLoginErrorMessage())}},{key:"createLoginErrorMessage",value:function(){return r.a.createElement("div",{className:"error-text display-flex-justify"},this.state.loginErrorMessage)}},{key:"createLoginPlatformButtons",value:function(){return r.a.createElement("div",{className:"btn-row {this.state.platform}"},r.a.createElement("div",{className:"btn-column"},r.a.createElement("button",{type:"submit",className:"primary-button",onClick:this.handleSwitchToLogin},r.a.createElement("h3",null,"Polaris"))),r.a.createElement("div",{className:"btn-column"},r.a.createElement("button",{type:"submit",className:"primary-button",onClick:this.handleSwitchToLogin},r.a.createElement("h3",null,"CDM"))))}},{key:"createRwpLink",value:function(){}},{key:"createDevModeIcon",value:function(){var e=Object(W.a)(function(e){return{tooltip:{backgroundColor:"rgb(255, 255, 255)",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,"text-align":"center"}}})(H.a);return"polaris"===this.state.platform?r.a.createElement("div",{className:"bottom-right"},r.a.createElement(e,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{color:"inherit",variant:"body2"},this.state.polarisDomain===Q?"Set the Polaris Domain to development. Internal Rubrik use only.":"Set the Polaris Domain to production."))},r.a.createElement(z.a,{"aria-label":"delete",onClick:this.handleModeButton},this.state.polarisDomain===Q?r.a.createElement(_.a,null):r.a.createElement(I.a,null)))):void 0}},{key:"createLoginForm",value:function(){return r.a.createElement(L,{platform:this.state.platform,ip:this.state.ip,username:this.state.username,password:this.state.password,selectYourPlatform:this.handleSelectYourPlatform,onChange:this.onChange,loginButton:this.handleLoginButton,loginButtonText:this.state.loginButtonText,polarisDomain:this.state.polarisDomain})}},{key:"render",value:function(){return this.createFullLandingPageUi()}}]),t}(n.Component),$=a(164),K=a.n($),X=(a(361),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"test",value:function(){console.log("test")}},{key:"render",value:function(){var e=this;return r.a.createElement(K.a,{fetcher:function(t){return function(e,t,a,n,r,o,s){var i,l=P(a),c=S,u="https://".concat(l),p="".concat(s,"/api/graphql");"polaris"===t?(c.Authorization="Bearer ".concat(o),i=u+p):(c.Authorization="Basic "+btoa(n+":"+r),i=u+"/api/internal/graphql");var m=new URL(i),d={method:"post",protocol:m.protocol,hostname:m.hostname,port:m.port,path:m.pathname+m.search,headers:c,rejectUnauthorized:!1},h=Object(D.request)(d);return new Promise(function(t,a){h.on("response",function(e){var n=[];e.on("data",function(e){n.push(Buffer.from(e))}),e.on("end",function(r){var o=Buffer.concat(n).toString();e.statusCode>=400?a(o):t(JSON.parse(o))})}),h.on("error",a),h.end(JSON.stringify(e))})}(t,e.props.platform,e.props.nodeIp,e.props.username,e.props.password,e.props.apiToken,e.props.polarisDomain)}},r.a.createElement(K.a.Logo,null,r.a.createElement("img",{src:v.a,width:"40",align:"middle",alt:"Rubrik logo"})))}}]),t}(n.Component)),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={platform:null,nodeIp:null,username:null,password:null,apiToken:null,polarisDomain:null},a.handleCredentialUpdate=a.handleCredentialUpdate.bind(Object(m.a)(Object(m.a)(a))),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleCredentialUpdate",value:function(e,t,a,n,r,o){this.setState({platform:e,nodeIp:t,username:a,password:n,apiToken:r,polarisDomain:o})}},{key:"render",value:function(){var e=this;return null==this.state.apiToken?r.a.createElement(V,{credentialUpdate:function(t,a,n,r,o,s){return e.handleCredentialUpdate(t,a,n,r,o,s)}}):r.a.createElement(X,{platform:this.state.platform,nodeIp:this.state.nodeIp,username:this.state.username,password:this.state.password,apiToken:this.state.apiToken,polarisDomain:this.state.polarisDomain})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t){e.exports=require("assert")}},[[220,1,2]]]);
//# sourceMappingURL=main.e15b519c.chunk.js.map